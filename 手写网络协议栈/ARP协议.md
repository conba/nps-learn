# ARP协议

ARP（Address Resolution Protocol, 地址解析协议）是一个网络层协议，用于在局域网中（LAN）中**通过已知的IP地址查找对应的MAC地址**（物理地址）。它使得计算机可以在同一个子网内通过IP地址找到目标设备的硬件地址，从而实现数据包的正确传输。

# ARP工作原理

## 1. ARP请求

当一台设备需要想同一网络中的其他设备发送数据时，他会首先需要知道目标设备的MAC地址，若设备知道目标的IP地址，但不清楚MAC地址，他会广播一个ARP请求包，内容包括：

这个ARP请求会呗发送倒局域网中的所有设备，应为ARP请求是**广播包**

* 发送设备的IP和MAC地址
* 目标设备的IP地址（但MAC地址未知）

## ARP响应：

所有收到ARP请求的设备会检查目标IP地址。如果某台设备的IP地址与ARP请求中的目标IP匹配，他会返回一个ARP响应包。包含：

这个ARP响应包会**单播**（即只发给请求的设备），是的请求设备能够知道目标设别的MAC地址。

* 目标设备的IP地址
* 目标设备的MAC地址。

## 3. 缓存ARP表

为了避免每次发送数据都要发送ARP请求，设备通常会讲从ARP响应中获取倒的IP和MAC地址映射关系缓存中唉ARP表中，ARP表会定期更新或者在一段时间后过期。

```shell
arp -a // 查看本地arp表
```

![](image\ARP表.jpg)

# ARP用途和ARP攻击

![](image\ARP用途.jpg)

# ARP报文结构

![](image\ARP报文结构.png)